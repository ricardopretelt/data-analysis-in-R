---
title: "Data analysis in R"
output: html_notebook
---
### Assign a value to a variable
```{r}
x<-1
x
```
### To print in console

```{r}
print(x)
```
### To assign a character value
```{r}
msg<-"hello"
msg
```
### To assign a vector
```{r}
x1<-1:20
x1
```
### To use integers
```{r}
int<-2L
int
```
### To use infinity
```{r}
int/Inf
```
### To concatenate values
```{r}
c(0.5, 0.6)
```
### To change values to logic
```{r}
as.logical(x1)
```
### To create a list (It can contain values of different types)
```{r}
list_x<-list(1,"a", TRUE, 1+4i, 2L)
list_x
```
### To create an empty matrix
```{r}
mat<-matrix(nrow=2, ncol=3)
mat
```
### To see the dimension of the matrix created
```{r}
dim(mat)
```
### To see the attributes of the matrix. In this case its dimension
```{r}
attributes(mat)
```
### To fill a matrix
```{r}
mat<-matrix(1:6, nrow=2, ncol=3)
mat
```
### To change the format of the matrix changing the dimension as attribute
```{r}
dim(mat)<-c(3,2)
mat
```
### To concatenate vectors by rows 
```{r}
x2<-1:3
y2<-7:9
rbind(x2,y2)
```
### To concatenate vectors by columns
```{r}
cbind(x2,y2)
```
### To use factors to label the results in the table
```{r}
fac<-factor(c("yes", "yes", "no", "yes"))
fac
```
### To see the factor as table
```{r}
table(fac)
```
### To find null values
```{r}
is.na(fac)
```
### To find nan values
```{r}
is.nan(fac)
```
### To create a dataframe in R
```{r}
df<-data.frame(id=1:10, target=c(T,T,F,F,T,T,F,T,F,T), position=c(2,3,4,1,5,7,6,1,9,10), cost=c(21,32,NA,NA,4,23,24,76,12,9), season=c(1,1,1,2,2,2,3,3,3,4))
df
```
### To see the number of rows
```{r}
nrow(df)
```
### To see the number of columns
```{r}
ncol(df)
```
### To see the names of the columns
```{r}
names(df)
```
### To obtain the value of cost in the 7th row
```{r}
df[7,"cost"]
```
### To know how many missing values are in the cost column
```{r}
cst_na=is.na(df["cost"])
table(cst_na)
```
### Calculate the mean removing the na values
```{r}
cst=df["cost"]
cst=cst[!cst_na]
mean(cst)
```
### Extract the subset of rows with cost>21 and season>1 and calculate the mean of position

#### First remove missing values
```{r}
subset<-df[complete.cases(df$cost, df$season, df$position), ]
subset
```
#### Use the logical operator
```{r}
log<-subset[subset$cost>21 & subset$season>1,]
log
```
#### Calculate the mean of position
```{r}
pos<-log[["season"]]
mean(pos)
```
### Calculate the mean of cost when season=3
```{r}
df3<-df[df$season==3,]
seas3<-df3[["cost"]]
mean(seas3)
```
### Maximum cost value in the season 2
```{r}
df2<-df[df$season==2,]
df2<-df2[["cost"]]
max(df2, na.rm=TRUE)
```
### To create a list with names
```{r}
list_x1<-list(a=1,b=2,c=3)
list_x1
```
### To create a list with names
```{r}
mat2<-matrix(1:4,nrow=2, ncol=2)
dimnames(mat2)<-list(c("a","b"),c("c","d"))
mat2
```
### If else control structure
```{r}
x<-2
if (x==2){
        y<-1
}else{
        y<-0
}
y  
```
#### else if case
```{r}
a<-1
if (x==1){
        y<-4
}else if(a==1){
        y<-0
}
print(y)
```
### For control structure
```{r}
for (i in 1:3){
        print(i)
} 
```
#### Use of seq_along()
```{r}
x<-c("a","b","c","d")
for (i in seq_along(x)){
        print(x[i])
}
```
#### Nested loop
```{r}
x<-matrix(1:6, 2,3)
for (i in seq_len(nrow(x))){
        for (j in seq_len(ncol(x))){
                print(x[i,j])
        }
}
```
### While control structure
```{r}
count<-0
while(count<5){
        print(count)
        count<-count+1
}
```
### Repeat and break control structure
```{r}
value<-100000
div<-2
tol<- 1e-8
iter<-0
repeat{
        value<-value/div
        if(value<tol){
                print(iter)
                break
        }else{
                iter<-iter+1    
        } 
}
```
### Next control structure
```{r}
goal<-4
for (i in 1:6){
        if (goal==i){
                print("you are there")
                next
        } 
        print(i)
}
```
### Create a function
```{r}
add_func<-function(x,y){
        x+y
}
add_func(4,3)
```
### Create function with default
```{r}
add_func2<-function(x,y=3){
        x+y
}
add_func2(2)
```
### Dates and time in R

#### Assign a date
```{r}
x<-as.Date("1970-01-01")
x
```
#### Actual system time
```{r}
x<-Sys.time()
x #it is in POSIXct
```
#### To get info from POSIXlt
```{r}
p<-as.POSIXlt(x)
p$sec
```